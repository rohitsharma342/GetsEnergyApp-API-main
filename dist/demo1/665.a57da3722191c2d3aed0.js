(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[665],{8665:(t,e,n)=>{"use strict";n.r(e),n.d(e,{OrdersModule:()=>N});var i=n(8583),r=n(2533),o=n(9866),s=n(2789),a=n(7237),c=n(3679),d=n(3423),g=n(7716);function h(t,e){if(1&t&&(g.TgZ(0,"div",3),g.TgZ(1,"div",2),g.TgZ(2,"p"),g._uU(3," WhatsApp Num : "),g.qZA(),g.qZA(),g.TgZ(4,"div",2),g._uU(5),g.qZA(),g.qZA()),2&t){const t=g.oxw();g.xp6(5),g.hij(" ",t.orderData.whatsAppNum," ")}}function l(t,e){if(1&t&&(g.TgZ(0,"div",3),g.TgZ(1,"div",2),g.TgZ(2,"p"),g._uU(3," Code : "),g.qZA(),g.qZA(),g.TgZ(4,"div",2),g._uU(5),g.qZA(),g.TgZ(6,"div",2),g.TgZ(7,"p"),g._uU(8," Quantity : "),g.qZA(),g.qZA(),g.TgZ(9,"div",2),g._uU(10),g.qZA(),g.TgZ(11,"div",2),g.TgZ(12,"p"),g._uU(13," Amount : "),g.qZA(),g.qZA(),g.TgZ(14,"div",2),g._uU(15),g.ALo(16,"currency"),g.qZA(),g.TgZ(17,"div",9),g._UZ(18,"hr",10),g.qZA(),g.qZA()),2&t){const t=e.$implicit;g.xp6(5),g.hij(" ",t.code," "),g.xp6(5),g.hij(" ",t.quantity," Sq. Ft "),g.xp6(5),g.hij(" ",g.xi3(16,3,t.amount,"INR")," ")}}let p=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.orderData=e.orderData}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(a.so),g.Y36(a.WI,8))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-order-details"]],decls:81,vars:31,consts:[[1,"container","text-center"],[1,"row"],[1,"col-md-6"],[1,"row","mt-3"],["class","row mt-3",4,"ngIf"],[1,"my-2"],[1,"row","text-center"],[1,"col-md-12"],["class","row mt-3",4,"ngFor","ngForOf"],[1,"col-md-12","text-center"],[1,"text-center",2,"width","60%","margin-left","auto","margin-right","auto"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"p"),g._uU(4," Customer Name : "),g.qZA(),g.qZA(),g.TgZ(5,"div",2),g._uU(6),g.ALo(7,"titlecase"),g.qZA(),g.qZA(),g.TgZ(8,"div",3),g.TgZ(9,"div",2),g.TgZ(10,"p"),g._uU(11," Phone : "),g.qZA(),g.qZA(),g.TgZ(12,"div",2),g._uU(13),g.qZA(),g.qZA(),g.TgZ(14,"div",3),g.TgZ(15,"div",2),g.TgZ(16,"p"),g._uU(17," WhatsApp ? : "),g.qZA(),g.qZA(),g.TgZ(18,"div",2),g._uU(19),g.qZA(),g.qZA(),g.YNc(20,h,6,1,"div",4),g.TgZ(21,"div",3),g.TgZ(22,"div",2),g.TgZ(23,"p"),g._uU(24," City/State : "),g.qZA(),g.qZA(),g.TgZ(25,"div",2),g._uU(26),g.ALo(27,"titlecase"),g.ALo(28,"titlecase"),g.qZA(),g.qZA(),g.TgZ(29,"div",3),g.TgZ(30,"div",2),g.TgZ(31,"p"),g._uU(32," Country : "),g.qZA(),g.qZA(),g.TgZ(33,"div",2),g._uU(34),g.ALo(35,"titlecase"),g.qZA(),g.qZA(),g.TgZ(36,"div",3),g.TgZ(37,"div",2),g.TgZ(38,"p"),g._uU(39," Application : "),g.qZA(),g.qZA(),g.TgZ(40,"div",2),g._uU(41),g.qZA(),g.qZA(),g.TgZ(42,"div",3),g.TgZ(43,"div",2),g.TgZ(44,"p"),g._uU(45," Notes : "),g.qZA(),g.qZA(),g.TgZ(46,"div",2),g._uU(47),g.qZA(),g.qZA(),g.TgZ(48,"div",3),g.TgZ(49,"div",2),g.TgZ(50,"p"),g._uU(51," Total Amount : "),g.qZA(),g.qZA(),g.TgZ(52,"div",2),g._uU(53),g.ALo(54,"currency"),g.qZA(),g.qZA(),g.TgZ(55,"div",3),g.TgZ(56,"div",2),g.TgZ(57,"p"),g._uU(58," GSTIN : "),g.qZA(),g.qZA(),g.TgZ(59,"div",2),g._uU(60),g.qZA(),g.qZA(),g.TgZ(61,"div",3),g.TgZ(62,"div",2),g.TgZ(63,"p"),g._uU(64," GST Amount : "),g.qZA(),g.qZA(),g.TgZ(65,"div",2),g._uU(66),g.ALo(67,"currency"),g.qZA(),g.qZA(),g.TgZ(68,"div",3),g.TgZ(69,"div",2),g.TgZ(70,"p"),g._uU(71," Before GST Amount : "),g.qZA(),g.qZA(),g.TgZ(72,"div",2),g._uU(73),g.ALo(74,"currency"),g.qZA(),g.qZA(),g._UZ(75,"hr",5),g.TgZ(76,"div",6),g.TgZ(77,"div",7),g.TgZ(78,"b"),g._uU(79," PRODUCTS "),g.qZA(),g.qZA(),g.qZA(),g.YNc(80,l,19,6,"div",8),g.qZA()),2&t&&(g.xp6(6),g.hij(" ",g.lcZ(7,14,e.orderData.name)," "),g.xp6(7),g.hij(" ",e.orderData.phone," "),g.xp6(6),g.hij(" ",0==e.orderData.isPhoneWhatsApp?"No":"Yes"," "),g.xp6(1),g.Q6J("ngIf",0==e.orderData.isPhoneWhatsApp),g.xp6(6),g.AsE(" ",g.lcZ(27,16,e.orderData.city),", ",g.lcZ(28,18,e.orderData.state)," "),g.xp6(8),g.hij(" ",g.lcZ(35,20,e.orderData.country)," "),g.xp6(7),g.hij(" ",0==e.orderData.application?"Personal Use":1==e.orderData.application?"Business Use":"Reselling"," "),g.xp6(6),g.hij(" ",e.orderData.notes," "),g.xp6(6),g.hij(" ",g.xi3(54,22,e.orderData.totalAmount,"INR")," "),g.xp6(7),g.hij(" ",e.orderData.gstIn," "),g.xp6(6),g.hij(" ",g.xi3(67,25,e.orderData.gstAmount,"INR")," "),g.xp6(7),g.hij(" ",g.xi3(74,28,e.orderData.beforeGSTAmount,"INR")," "),g.xp6(7),g.Q6J("ngForOf",e.orderData.products))},directives:[i.O5,i.sg],pipes:[i.rS,i.H9],styles:["p[_ngcontent-%COMP%]{font-weight:550}*[_ngcontent-%COMP%]{font-size:15px}"]}),t})();var u=n(1841),Z=n(9765),m=n(2340),A=n(89);const T=`${m.N.apiUrl}`;let q=(()=>{class t{constructor(t,e){var n;this.http=t,this.authService=e,this.listeners=new Z.xQ,this.httpHeaders=new u.WM({Authorization:`Bearer ${null===(n=this.authService.getAuthFromLocalStorage())||void 0===n?void 0:n.authToken}`})}listen(){return this.listeners.asObservable()}filter(t){this.listeners.next(t)}getOrders(){return this.http.get(`${T}/orders`,{headers:this.httpHeaders})}getPendingOrders(){return this.http.get(`${T}/orders/pending`,{headers:this.httpHeaders})}editPendingOrderStatus(t,e){return this.http.patch(`${T}/orders/${t}/pending`,e,{headers:this.httpHeaders})}editOrderStatus(t,e){return this.http.patch(`${T}/orders/${t}/status`,e,{headers:this.httpHeaders})}getOrdersByName(t){return this.http.post(`${T}/orders/name-filter`,t,{headers:this.httpHeaders})}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(u.eN),g.LFG(A.e8))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=n(7521),_=n(9699);function f(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){return g.CHM(t),g.oxw().searchPendingOrder()}),g._UZ(1,"i",23),g.qZA()}}function b(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",24),g.NdJ("click",function(){return g.CHM(t),g.oxw().removeSearchedList()}),g._uU(1," X"),g.qZA()}}function v(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",25),g.TgZ(2,"a",26),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"td"),g.TgZ(5,"a",26),g._uU(6),g.ALo(7,"titlecase"),g.qZA(),g.qZA(),g.TgZ(8,"td"),g.TgZ(9,"a",26),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"td"),g.TgZ(12,"a",26),g._uU(13),g.qZA(),g.qZA(),g.TgZ(14,"td"),g.TgZ(15,"a",26),g._uU(16),g.ALo(17,"titlecase"),g.ALo(18,"titlecase"),g.qZA(),g.qZA(),g.TgZ(19,"td"),g.TgZ(20,"a",26),g._uU(21),g.ALo(22,"currency"),g.qZA(),g.qZA(),g.TgZ(23,"td",27),g.TgZ(24,"a",26),g.TgZ(25,"select",28,29),g.NdJ("ngModelChange",function(e){return g.CHM(t).$implicit.isPendingOrder=e})("change",function(){const e=g.CHM(t).$implicit,n=g.MAs(26);return g.oxw().statusSelected(e,n.value)}),g.TgZ(27,"option",30),g._uU(28,"Pending"),g.qZA(),g.TgZ(29,"option",31),g._uU(30,"Confirm"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(31,"td"),g.TgZ(32,"a",26),g._uU(33),g.ALo(34,"date"),g.qZA(),g.qZA(),g.TgZ(35,"td",27),g.TgZ(36,"a",32),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().showOrderDetails(e)}),g._UZ(37,"span",33),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,n=e.index;g.xp6(3),g.hij(" ",n+1," "),g.xp6(3),g.hij(" ",g.lcZ(7,10,t.name)," "),g.xp6(4),g.hij(" ",t.email," "),g.xp6(3),g.hij(" ",t.phone," "),g.xp6(3),g.AsE(" ",g.lcZ(17,12,t.city),", ",g.lcZ(18,14,t.state)," "),g.xp6(5),g.hij(" ",g.xi3(22,16,t.totalAmount,"INR")," "),g.xp6(4),g.Q6J("ngModel",t.isPendingOrder),g.xp6(8),g.hij(" ",g.xi3(34,19,t.creationTimeStamp,"mediumDate")," "),g.xp6(4),g.Q6J("inlineSVG","./assets/media/icons/duotune/general/external-alt.svg")}}const x=function(t){return{itemsPerPage:8,currentPage:t}};let C=(()=>{class t{constructor(t,e,n,i,r,o){this.matDialog=t,this.orderService=e,this.userService=n,this.changeDetection=i,this.spinnerService=r,this.toast=o,this.p=1,this.allPendingOrders=[],this.dummyPendingOrders=[],this.searchName="",this.showSearchIcon=!0,this.orderService.listen().subscribe(t=>{this.ngOnInit()})}ngOnInit(){this.spinnerService.show(),this.orderService.getPendingOrders().subscribe(t=>{t.status&&(this.allPendingOrders=t.orders,this.dummyPendingOrders=t.orders,this.changeDetection.detectChanges(),console.log(this.allPendingOrders.length),this.spinnerService.hide())})}searchPendingOrder(){0==this.searchName.length?this.toast.error("Enter valid search string"):(this.showSearchIcon=!1,this.spinnerService.show(),this.orderService.getOrdersByName({userName:this.searchName,pendingStatus:1}).subscribe(t=>{this.allPendingOrders=t.orders,this.changeDetection.detectChanges(),this.spinnerService.hide()}))}removeSearchedList(){this.allPendingOrders=this.dummyPendingOrders,this.searchName="",this.showSearchIcon=!0}statusSelected(t,e){console.log(t._id,e);let n={title:"Order Status UPDATED!",message:"Your order has been "+(0==e?"Confirmed":"Pending"),deviceId:t.deviceId};this.spinnerService.show(),this.orderService.editPendingOrderStatus(t._id,{newStatus:+e}).subscribe(e=>{e.status?(this.userService.sendNotificationToSingleUser(t.phone,n).subscribe(t=>{t.status?this.toast.success(e.message,"",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"}):this.toast.error(e.message+"(Notification not sent)","Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})},t=>{this.toast.error(t,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})}),this.ngOnInit()):this.toast.error(e.message,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})},t=>{this.toast.error(t,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})})}showOrderDetails(t){const e=new a.vA;e.disableClose=!1,e.id="order-details-component",e.width="570px",e.maxHeight="97vh",e.data={orderData:t},e.panelClass="custom-container-show",this.matDialog.open(p,e)}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(a.uw),g.Y36(q),g.Y36(O.b),g.Y36(g.sBO),g.Y36(o.t2),g.Y36(_._W))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-list-pending-orders"]],decls:41,vars:10,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-2","mb-1"],[1,"card-toolbar"],[1,"input-group","mb-3"],["type","text","name","searchName","placeholder","Search Order","aria-describedby","button-addon2",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-primary btn-outline-secondary","type","button","id","button-addon2",3,"click",4,"ngIf"],["class","btn btn-danger btn-outline-secondary","type","button","id","button-addon2",3,"click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-50px"],[1,"min-w-90px"],[1,"min-w-110px"],[1,"min-w-70px","rounded-end"],[4,"ngFor","ngForOf"],[1,"text-center"],[3,"pageChange"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-clockwise",3,"fullScreen"],[2,"color","white"],["type","button","id","button-addon2",1,"btn","btn-primary","btn-outline-secondary",3,"click"],[1,"fa","fa-search"],["type","button","id","button-addon2",1,"btn","btn-danger","btn-outline-secondary",3,"click"],[1,"ps-5"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"text-left"],["name","isPendingOrder","required","",1,"form-control","browser-default","custom-select",3,"ngModel","ngModelChange","change"],["mySelect",""],["value","1"],["value","0"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h3",2),g.TgZ(3,"span",3),g._uU(4,"Pending Orders"),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g.TgZ(7,"input",6),g.NdJ("ngModelChange",function(t){return e.searchName=t}),g.qZA(),g.YNc(8,f,2,0,"button",7),g.YNc(9,b,2,0,"button",8),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",9),g.TgZ(11,"div",10),g.TgZ(12,"table",11),g.TgZ(13,"thead"),g.TgZ(14,"tr",12),g.TgZ(15,"th",13),g._uU(16,"S.No"),g.qZA(),g.TgZ(17,"th",14),g._uU(18,"Name"),g.qZA(),g.TgZ(19,"th",14),g._uU(20,"Email"),g.qZA(),g.TgZ(21,"th",14),g._uU(22,"Phone"),g.qZA(),g.TgZ(23,"th",14),g._uU(24,"City"),g.qZA(),g.TgZ(25,"th",14),g._uU(26,"Amount"),g.qZA(),g.TgZ(27,"th",14),g._uU(28,"Payment Status"),g.qZA(),g.TgZ(29,"th",15),g._uU(30,"Ordered On"),g.qZA(),g.TgZ(31,"th",16),g._uU(32,"Details"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(33,"tbody"),g.YNc(34,v,38,22,"tr",17),g.ALo(35,"paginate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(36,"div",18),g.TgZ(37,"pagination-controls",19),g.NdJ("pageChange",function(t){return e.p=t}),g.qZA(),g.qZA(),g.TgZ(38,"ngx-spinner",20),g.TgZ(39,"p",21),g._uU(40," Loading... "),g.qZA(),g.qZA()),2&t&&(g.xp6(7),g.Q6J("ngModel",e.searchName),g.xp6(1),g.Q6J("ngIf",e.showSearchIcon),g.xp6(1),g.Q6J("ngIf",!e.showSearchIcon),g.xp6(25),g.Q6J("ngForOf",g.xi3(35,5,e.allPendingOrders,g.VKq(8,x,e.p))),g.xp6(4),g.Q6J("fullScreen",!0))},directives:[c.Fj,c.JJ,c.On,i.O5,i.sg,r.LS,o.Ro,c.EJ,c.Q7,c.YN,c.Kr,s.d$],pipes:[r._s,i.rS,i.H9,i.uU],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;font-family:Open Sans,sans-serif;color:#222}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%], li[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:14px}.twelve[_ngcontent-%COMP%]{width:100%}.eleven[_ngcontent-%COMP%]{width:91.53%}.ten[_ngcontent-%COMP%]{width:83.06%}.nine[_ngcontent-%COMP%]{width:74.6%}.eight[_ngcontent-%COMP%]{width:66.13%}.seven[_ngcontent-%COMP%]{width:57.66%}.six[_ngcontent-%COMP%]{width:49.2%}.five[_ngcontent-%COMP%]{width:40.73%}.four[_ngcontent-%COMP%]{width:32.26%}.three[_ngcontent-%COMP%]{width:23.8%}.two[_ngcontent-%COMP%]{width:15.33%}.one[_ngcontent-%COMP%]{width:6.866%}.col[_ngcontent-%COMP%]{display:block;float:left;margin:1% 0 1% 1.6%}.col[_ngcontent-%COMP%]:first-of-type{margin-left:0}.container[_ngcontent-%COMP%]{width:100%;max-width:940px;margin:0 auto;position:relative;text-align:center}.cf[_ngcontent-%COMP%]:after, .cf[_ngcontent-%COMP%]:before{content:" ";display:table}.cf[_ngcontent-%COMP%]:after{clear:both}.cf[_ngcontent-%COMP%]{*zoom:1}.pagination[_ngcontent-%COMP%]{padding:30px 0}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style-type:none}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 18px;color:#222}.p1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px;padding:0;text-align:center}.p1[_ngcontent-%COMP%]   a.is-active[_ngcontent-%COMP%]{background-color:#2ecc71;border-radius:100%;color:#fff}.input-group[_ngcontent-%COMP%]{width:256px}@media only screen and (max-width: 768px){.input-group[_ngcontent-%COMP%]{width:auto}}']}),t})();function w(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){return g.CHM(t),g.oxw().searchOrder()}),g._UZ(1,"i",23),g.qZA()}}function P(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",24),g.NdJ("click",function(){return g.CHM(t),g.oxw().removeSearchedList()}),g._uU(1," X"),g.qZA()}}function M(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",25),g.TgZ(2,"a",26),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"td"),g.TgZ(5,"a",26),g._uU(6),g.ALo(7,"titlecase"),g.qZA(),g.qZA(),g.TgZ(8,"td"),g.TgZ(9,"a",26),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"td"),g.TgZ(12,"a",26),g._uU(13),g.qZA(),g.qZA(),g.TgZ(14,"td",27),g.TgZ(15,"a",26),g._uU(16),g.ALo(17,"titlecase"),g.ALo(18,"titlecase"),g.qZA(),g.qZA(),g.TgZ(19,"td"),g.TgZ(20,"a",26),g._uU(21),g.ALo(22,"currency"),g.qZA(),g.qZA(),g.TgZ(23,"td",28),g.TgZ(24,"a",26),g.TgZ(25,"select",29,30),g.NdJ("ngModelChange",function(e){return g.CHM(t).$implicit.orderStatus=e})("change",function(){const e=g.CHM(t).$implicit,n=g.MAs(26);return g.oxw().statusSelected(e,n.value)}),g.TgZ(27,"option",31),g._uU(28,"Processing"),g.qZA(),g.TgZ(29,"option",32),g._uU(30,"Packed"),g.qZA(),g.TgZ(31,"option",33),g._uU(32,"Dispatched"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(33,"td"),g.TgZ(34,"a",26),g._uU(35),g.ALo(36,"date"),g.qZA(),g.qZA(),g.TgZ(37,"td",28),g.TgZ(38,"a",34),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().showOrderDetails(e)}),g._UZ(39,"span",35),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(3),g.hij(" ",null==t.orderId||0==t.orderId.length?"NA":t.orderId," "),g.xp6(3),g.hij(" ",g.lcZ(7,10,t.name)," "),g.xp6(4),g.hij(" ",t.email," "),g.xp6(3),g.hij(" ",t.phone," "),g.xp6(3),g.AsE(" ",g.lcZ(17,12,t.city),", ",g.lcZ(18,14,t.state)," "),g.xp6(5),g.hij(" ",g.xi3(22,16,t.totalAmount,"INR")," "),g.xp6(4),g.Q6J("ngModel",t.orderStatus),g.xp6(10),g.hij(" ",g.xi3(36,19,t.creationTimeStamp,"mediumDate")," "),g.xp6(4),g.Q6J("inlineSVG","./assets/media/icons/duotune/general/external-alt.svg")}}const S=function(t){return{itemsPerPage:8,currentPage:t}},y=[{path:"list",component:(()=>{class t{constructor(t,e,n,i,r,o){this.matDialog=t,this.orderService=e,this.userService=n,this.changeDetection=i,this.spinnerService=r,this.toast=o,this.p=1,this.allOrders=[],this.dummyOrders=[],this.searchName="",this.showSearchIcon=!0,this.orderService.listen().subscribe(t=>{this.ngOnInit()})}ngOnInit(){this.spinnerService.show(),this.orderService.getOrders().subscribe(t=>{t.status&&(this.allOrders=t.orders,this.dummyOrders=t.orders,this.changeDetection.detectChanges(),console.log(this.allOrders.length),this.spinnerService.hide())})}searchOrder(){0==this.searchName.length?this.toast.error("Enter valid search string"):(this.showSearchIcon=!1,this.spinnerService.show(),this.orderService.getOrdersByName({userName:this.searchName,pendingStatus:0}).subscribe(t=>{this.allOrders=t.orders,this.changeDetection.detectChanges(),this.spinnerService.hide()}))}removeSearchedList(){this.allOrders=this.dummyOrders,this.searchName="",this.showSearchIcon=!0}statusSelected(t,e){console.log(t._id,e);let n={title:"Order Status UPDATED!",message:"Your order has been "+(0==e?"Processed":1==e?"Packed":"Dispatched"),deviceId:t.deviceId};this.spinnerService.show(),this.orderService.editOrderStatus(t._id,{newStatus:+e}).subscribe(e=>{e.status?(this.userService.sendNotificationToSingleUser(t.phone,n).subscribe(t=>{t.status?this.toast.success(e.message,"",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"}):this.toast.error(e.message+"(Notification not sent)","Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})},t=>{this.toast.error(t,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})}),this.ngOnInit()):this.toast.error(e.message,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})},t=>{this.toast.error(t,"Error Occured",{timeOut:2500,progressBar:!0,progressAnimation:"increasing",positionClass:"toast-top-right"})})}showOrderDetails(t){const e=new a.vA;e.disableClose=!1,e.id="order-details-component",e.width="570px",e.maxHeight="97vh",e.data={orderData:t},e.panelClass="custom-container-show",this.matDialog.open(p,e)}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(a.uw),g.Y36(q),g.Y36(O.b),g.Y36(g.sBO),g.Y36(o.t2),g.Y36(_._W))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-list"]],decls:41,vars:10,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-2","mb-1"],[1,"card-toolbar"],[1,"input-group","mb-3"],["type","text","name","searchName","placeholder","Search Order","aria-describedby","button-addon2",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-primary btn-outline-secondary","type","button","id","button-addon2",3,"click",4,"ngIf"],["class","btn btn-danger btn-outline-secondary","type","button","id","button-addon2",3,"click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-50px"],[1,"min-w-90px"],[1,"min-w-110px"],[1,"min-w-70px","rounded-end"],[4,"ngFor","ngForOf"],[1,"text-center"],[3,"pageChange"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-spin-clockwise",3,"fullScreen"],[2,"color","white"],["type","button","id","button-addon2",1,"btn","btn-primary","btn-outline-secondary",3,"click"],[1,"fa","fa-search"],["type","button","id","button-addon2",1,"btn","btn-danger","btn-outline-secondary",3,"click"],[1,"ps-5"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[2,"width","200px"],[1,"text-left"],["name","orderStatus","required","",1,"form-control","browser-default","custom-select",3,"ngModel","ngModelChange","change"],["mySelect",""],["value","0"],["value","1"],["value","2"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"h3",2),g.TgZ(3,"span",3),g._uU(4,"All Orders"),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g.TgZ(7,"input",6),g.NdJ("ngModelChange",function(t){return e.searchName=t}),g.qZA(),g.YNc(8,w,2,0,"button",7),g.YNc(9,P,2,0,"button",8),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",9),g.TgZ(11,"div",10),g.TgZ(12,"table",11),g.TgZ(13,"thead"),g.TgZ(14,"tr",12),g.TgZ(15,"th",13),g._uU(16,"Order ID"),g.qZA(),g.TgZ(17,"th",14),g._uU(18,"Name"),g.qZA(),g.TgZ(19,"th",14),g._uU(20,"Email"),g.qZA(),g.TgZ(21,"th",14),g._uU(22,"Phone"),g.qZA(),g.TgZ(23,"th",14),g._uU(24,"City"),g.qZA(),g.TgZ(25,"th",14),g._uU(26,"Amount"),g.qZA(),g.TgZ(27,"th",14),g._uU(28,"Status"),g.qZA(),g.TgZ(29,"th",15),g._uU(30,"Ordered On"),g.qZA(),g.TgZ(31,"th",16),g._uU(32,"Details"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(33,"tbody"),g.YNc(34,M,40,22,"tr",17),g.ALo(35,"paginate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(36,"div",18),g.TgZ(37,"pagination-controls",19),g.NdJ("pageChange",function(t){return e.p=t}),g.qZA(),g.qZA(),g.TgZ(38,"ngx-spinner",20),g.TgZ(39,"p",21),g._uU(40," Loading... "),g.qZA(),g.qZA()),2&t&&(g.xp6(7),g.Q6J("ngModel",e.searchName),g.xp6(1),g.Q6J("ngIf",e.showSearchIcon),g.xp6(1),g.Q6J("ngIf",!e.showSearchIcon),g.xp6(25),g.Q6J("ngForOf",g.xi3(35,5,e.allOrders,g.VKq(8,S,e.p))),g.xp6(4),g.Q6J("fullScreen",!0))},directives:[c.Fj,c.JJ,c.On,i.O5,i.sg,r.LS,o.Ro,c.EJ,c.Q7,c.YN,c.Kr,s.d$],pipes:[r._s,i.rS,i.H9,i.uU],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;font-family:Open Sans,sans-serif;color:#222}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%], li[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:14px}.twelve[_ngcontent-%COMP%]{width:100%}.eleven[_ngcontent-%COMP%]{width:91.53%}.ten[_ngcontent-%COMP%]{width:83.06%}.nine[_ngcontent-%COMP%]{width:74.6%}.eight[_ngcontent-%COMP%]{width:66.13%}.seven[_ngcontent-%COMP%]{width:57.66%}.six[_ngcontent-%COMP%]{width:49.2%}.five[_ngcontent-%COMP%]{width:40.73%}.four[_ngcontent-%COMP%]{width:32.26%}.three[_ngcontent-%COMP%]{width:23.8%}.two[_ngcontent-%COMP%]{width:15.33%}.one[_ngcontent-%COMP%]{width:6.866%}.col[_ngcontent-%COMP%]{display:block;float:left;margin:1% 0 1% 1.6%}.col[_ngcontent-%COMP%]:first-of-type{margin-left:0}.container[_ngcontent-%COMP%]{width:100%;max-width:940px;margin:0 auto;position:relative;text-align:center}.cf[_ngcontent-%COMP%]:after, .cf[_ngcontent-%COMP%]:before{content:" ";display:table}.cf[_ngcontent-%COMP%]:after{clear:both}.cf[_ngcontent-%COMP%]{*zoom:1}.pagination[_ngcontent-%COMP%]{padding:30px 0}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style-type:none}.pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:10px 18px;color:#222}.p1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px;padding:0;text-align:center}.p1[_ngcontent-%COMP%]   a.is-active[_ngcontent-%COMP%]{background-color:#2ecc71;border-radius:100%;color:#fff}.input-group[_ngcontent-%COMP%]{width:256px}@media only screen and (max-width: 768px){.input-group[_ngcontent-%COMP%]{width:auto}}']}),t})()},{path:"pending",component:C}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[d.Bz.forChild(y)],d.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[i.ez,o.ef,r.JX,s.vi,a.Is,c.u5,U]]}),t})()}}]);